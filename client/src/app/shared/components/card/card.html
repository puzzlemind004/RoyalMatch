<div
  class="card-container group relative aspect-[2.5/3.5] w-24 md:w-28 cursor-pointer rounded-lg transition-transform duration-300 hover:scale-105"
  [class.pointer-events-none]="!selectable()"
  [class.ring-4]="selected()"
  [class]="selected() ? ringColor() : ''"
  (click)="onCardClick()"
  (touchstart)="onCardTap($event)"
>
  <!-- Card Back -->
  @if (!faceUp()) {
    <div
      class="card-back absolute inset-0 flex items-center justify-center rounded-lg border-2 border-gray-700 bg-gradient-to-br from-blue-900 to-blue-950 shadow-lg"
    >
      <div class="text-6xl text-white opacity-30">ðŸŽ´</div>
    </div>
  }

  <!-- Card Front -->
  @if (faceUp()) {
    <div
      class="card-front absolute inset-0 flex flex-col overflow-hidden rounded-lg border-2 border-gray-300 bg-white shadow-lg"
      [class.text-red-600]="suitColor === 'red'"
      [class.text-black]="suitColor === 'black'"
    >
      <!-- Strength badge (top-right) -->
      @if (colorStrength) {
        <div class="absolute right-1 top-1 z-10">
          @if (colorStrength === 'strong') {
            <div
              class="rounded-full bg-green-500 px-2 py-0.5 text-[0.5rem] font-bold text-white shadow-md"
            >
              FORTE
            </div>
          }
          @if (colorStrength === 'weak') {
            <div
              class="rounded-full bg-red-500 px-2 py-0.5 text-[0.5rem] font-bold text-white shadow-md"
            >
              FAIBLE
            </div>
          }
        </div>
      }

      <!-- Main card content area (without ribbon) -->
      <div class="relative flex flex-1 flex-col">
        <!-- Center: Large suit symbol (centered in the white area only) -->
        <div class="flex flex-1 items-center justify-center">
          <span class="text-6xl opacity-20">{{ suitSymbol }}</span>
        </div>
      </div>

      <!-- Bottom: Effect Title Ribbon with Value + Suit -->
      <div
        class="relative flex items-center justify-between gap-1 bg-gradient-to-r px-2 py-1 shadow-inner"
        [ngClass]="ribbonGradient"
      >
        <!-- Value + Suit -->
        <div class="flex shrink-0 items-center gap-0.5">
          <span class="text-xs font-bold leading-none text-white">{{ valueDisplay }}</span>
          <span class="text-sm leading-none text-white">{{ suitSymbol }}</span>
        </div>
        <!-- Effect Title -->
        <p class="flex-1 truncate text-center text-[0.6rem] font-bold leading-tight text-white">
          {{ effectTranslationKey + '.title' | transloco }}
        </p>
      </div>
    </div>
  }

  <!-- Tooltip (Desktop hover + Mobile tap) -->
  @if (faceUp() && (showTooltip() || selectable())) {
    <div
      [class.hidden]="!showTooltip()"
      [class.block]="showTooltip()"
      class="tooltip pointer-events-none absolute -top-20 left-1/2 z-10 hidden w-48 -translate-x-1/2 rounded-lg bg-gray-800 p-3 text-xs text-white shadow-xl group-hover:block"
    >
      <p class="mb-1 font-semibold">
        {{ effectTranslationKey + '.title' | transloco }}
      </p>
      <p class="text-[0.65rem] text-gray-300">
        {{ effectTranslationKey + '.desc' | transloco }}
      </p>
    </div>
  }
</div>
